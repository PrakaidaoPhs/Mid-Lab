{% extends "base.html" %}
{% block content %}

<div class="mt-2 p-1 bg-dark text-white rounded">
  <div class="progress">
    <div class="progress-bar bg-dark " style="width:100%"></div>
  </div>
    <h5>&nbsp;&nbsp;&nbsp;จัดการข้อมูลภาพยนตร์</h5>
    <div class="progress">
      <div class="progress-bar bg-dark " style="width:100%"></div>
    </div>
  </div>

<div class="container-fluid my-3 justify-content-center align-items-center shadow rounded">
<table class="table table-responsive table-striped">
    <thead>
        <tr>
            <th><div class="cold-block d-sm-none">
              No.
            </div><div class="col d-none d-sm-block">
              ลำดับ
            </div></th>
            <th>ภาพ</th>
            <th>ชื่อ</th>
            <th>วันที่เข้าฉาย</th>
            <th>เวลาของภาพยนตร์</th>
            <th>ประเภท
            </th>
            <th>ผู้กำกับ</th>
        </tr>
    </thead>
    <tbody>
        {% for i in Moviesdata %}
        <tr>
            <td>{{i.movie_id}}</td>
            <td><img src="{{ i.image.url }}" style="width:100px" alt="..."></td>
            <td>{{i.title}}</td>
            <td>{{i.release_date}}</td>
            <td>{{i.duration}}</td>
            <td>{{i.genre}}</td>
            <td>{{i.director}}</td>
            {% comment %} <td> ปุ่มแก้ไข และ ลบ จะกลายเป็นไอคอนไม่จอลดขนาดลง {% endcomment %}
              {% comment %} <div class="cold-block d-sm-none">
                <a href="edit/{{i.movie_id}}" class="btn btn-warning"><i class="fa fa-gear" aria-hidden="true"></i><a/>
                  <a href="#" class="btn btn-danger" data-bs-toggle="modal" 
                  data-bs-target="#deleteConfirmationModal" 
                  onclick="setDeleteUrl('delete/{{i.movie_id}}')">
                  <i class="fa fa-trash-o" aria-hidden="true"></i>
                    </a>
              </div><div class="col d-none d-sm-block">
                <a href="edit/{{i.movie_id}}" class="btn btn-outline-warning">แก้ไข<a/>
                  <a href="#" class="btn btn-outline-danger" data-bs-toggle="modal" 
                  data-bs-target="#deleteConfirmationModal" 
                  onclick="setDeleteUrl('delete/{{i.movie_id}}')">
                  ลบ
                    </a>
              </div>
              </td>ปุ่มแก้ไข และ ลบ จะกลายเป็นไอคอนไม่จอลดขนาดลง {% endcomment %}
        </tr>
        {% endfor %}
    </tbody>
{% comment %} โมดอล Modal แจ้งเตือน ก่อนทำการลบข้อมูล {% endcomment %}
{% comment %} <div class="modal fade" id="deleteConfirmationModal" tabindex="-1" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteConfirmationModalLabel">ยืนยันการลบ</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>คุณต้องการลบข้อมูล?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
          <a id="deleteButton" href="#" class="btn btn-outline-danger">ลบ</a>
        </div>
      </div>
    </div>
  </div>
  <script> 
    function setDeleteUrl(url) {
      document.getElementById('deleteButton').href = url;
    }
  </script> {% endcomment %}
{% comment %} โมดอล Modal แจ้งเตือน ก่อนทำการลบข้อมูล {% endcomment %}
</div>
{% endblock  %}